<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chi Tiáº¿t Sáº£n Pháº©m - Thá»§y Sáº£n ThÃ¡i SÆ¡n</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <header>
        <div>
            <img id="header-logo" src="https://placehold.co/100x40/0077b6/ffffff?text=Fish+Logo" alt="Fish Logo" />
        </div>
        <nav>
            <a href="webthuysanthaison.html">Trang Chá»§</a>
            <a href="#gioithieu">Giá»›i Thiá»‡u</a>
            <a href="#lienhe">LiÃªn Há»‡</a>
            <a href="product.html">Sáº£n Pháº©m</a>
            <div class="dropdown">
                <a href="#">TÃ i Khoáº£n &#9662;</a>
                <div class="dropdown-content">
                    <a href="login.html">ÄÄƒng nháº­p</a>
                    <a href="register.html">ÄÄƒng kÃ½</a>
                </div>
            </div>
            <a href="cart.html" class="cart-icon">ğŸ›’<span id="cart-item-count" class="cart-count">0</span></a>
        </nav>
    </header>

    <section id="product-detail" class="section">
        <h2>Chi Tiáº¿t Sáº£n Pháº©m</h2>
        <div id="product-info">
            <img id="product-image" src="" alt="Product Image" />
            <h3 id="product-name"></h3>
            <p id="product-description"></p>
            <p id="product-price"></p>
            <input type="number" id="product-quantity" value="1" min="1" />
            <button id="add-to-cart-btn">ThÃªm vÃ o giá»</button>
        </div>
    </section>

    <footer>
        <h3>LiÃªn há»‡ vá»›i chÃºng tÃ´i</h3>
        <p>ğŸ“ Sá»‘ 123, Ä‘Æ°á»ng Biá»ƒn Cáº£, Quáº­n 7, TP.HCM</p>
        <p>ğŸ“± 0909 xxx xxx | ğŸ“§ thaisson@thuysan.vn</p>
        <p>ğŸŒ www.thaissonthuysan.vn</p>
    </footer>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');

        function fetchProductDetails() {
            fetch(`get-products.php?id=${productId}`)
                .then(response => response.json())
                .then(product => {
                    document.getElementById('product-image').src = product.img;
                    document.getElementById('product-name').textContent = product.name;
                    document.getElementById('product-description').textContent = product.description;
                    document.getElementById('product-price').textContent = formatCurrency(product.price);
                })
                .catch(() => {
                    alert("KhÃ´ng thá»ƒ táº£i thÃ´ng tin sáº£n pháº©m!");
                });
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat("vi-VN", {
                style: "currency",
                currency: "VND",
                minimumFractionDigits: 0,
            }).format(amount);
        }

        document.getElementById('add-to-cart-btn').onclick = function() {
            const quantity = parseInt(document.getElementById('product-quantity').value);
            const product = { id: productId, quantity: quantity };
            addToCart(product);
        };

        function addToCart(product) {
            let cart = JSON.parse(localStorage.getItem("shoppingCart")) || [];
            const existingItemIndex = cart.findIndex(item => item.id === product.id);

            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity += product.quantity;
            } else {
                cart.push(product);
            }

            localStorage.setItem("shoppingCart", JSON.stringify(cart));
            alert("ÄÃ£ thÃªm sáº£n pháº©m vÃ o giá» hÃ ng!");
        }

        window.onload = fetchProductDetails;
    </script>
</body>
</html>